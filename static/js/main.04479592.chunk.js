(this["webpackJsonpquiz-up"]=this["webpackJsonpquiz-up"]||[]).push([[0],{27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},34:function(e,t,n){e.exports=n(56)},39:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(30),s=n.n(c),o=(n(39),n(10)),i=n(2),u=n(4),l=n(8),m="/",f="/signup",d="/login",b="/:category",p="/:category/game",h="/users",g=Object(a.createContext)(null),E=function(e){return function(t){return r.a.createElement(g.Consumer,null,(function(n){return r.a.createElement(e,Object.assign({},t,{firebase:n}))}))}},O=g,v=n(11),y=n(19),j=n.n(y),N=(n(40),n(42),n(45),{apiKey:"AIzaSyCTqXfHWyKfWJWCdkppfOOBA2Pv07YGXKQ",authDomain:"quiz-up-devtest.firebaseapp.com",databaseURL:"https://quiz-up-devtest.firebaseio.com",projectId:"quiz-up-devtest",storageBucket:"quiz-up-devtest.appspot.com",messagingSenderId:"521065956014"}),w=function e(){var t=this;Object(v.a)(this,e),this.doCreateUserWithEmailAndPassword=function(e,n){return t.auth.createUserWithEmailAndPassword(e,n)},this.doSignInWithEmailAndPassword=function(e,n){return t.auth.signInWithEmailAndPassword(e,n)},this.doSignOut=function(){return t.auth.signOut()},this.user=function(e){return t.db.ref("users/".concat(e))},this.users=function(){return t.db.ref("users")},j.a.initializeApp(N),this.auth=j.a.auth(),this.db=j.a.firestore()},S=Object(a.createContext)(null),k=n(15),C=n(17),A=n(16),q=n(18),I=function(e){var t=function(t){function n(e){var t;return Object(v.a)(this,n),(t=Object(C.a)(this,Object(A.a)(n).call(this,e))).state={authUser:null},t}return Object(q.a)(n,t),Object(k.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.listener=this.props.firebase.auth.onAuthStateChanged((function(t){t?e.setState({authUser:t}):e.setState({authUser:null})}))}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){return r.a.createElement(S.Provider,{value:this.state.authUser},r.a.createElement(e,this.props))}}]),n}(r.a.Component);return E(t)},P=function(e){return function(t){var n=function(n){function a(){return Object(v.a)(this,a),Object(C.a)(this,Object(A.a)(a).apply(this,arguments))}return Object(q.a)(a,n),Object(k.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.listener=this.props.firebase.auth.onAuthStateChanged((function(n){e(n)||t.props.history.push(d)}))}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){var n=this;return r.a.createElement(S.Consumer,null,(function(a){return e(a)?r.a.createElement(t,n.props):null}))}}]),a}(r.a.Component);return Object(l.g)(E(n))}};n(52);var D=E((function(e){return r.a.createElement("nav",{className:"navbar"},r.a.createElement("ul",{className:"navbar-list"},r.a.createElement("li",{className:"navbar-item logo"},r.a.createElement(u.b,{to:m,className:"navbar-link"},"QUIZ UP")),e.userIsAdmin&&r.a.createElement("li",{className:"navbar-item"},r.a.createElement(u.b,{to:h,className:"show-user-btn"},"Show Users"))," ",r.a.createElement(S.Consumer,null,(function(t){return t&&r.a.createElement("li",{className:"navbar-item"},r.a.createElement("button",{type:"button",onClick:e.firebase.doSignOut},"Log Out"))}))))}));n(27);var x=Object(l.g)(E((function(e){var t=Object(a.useState)(""),n=Object(i.a)(t,2),c=n[0],s=n[1],o=Object(a.useState)(""),l=Object(i.a)(o,2),f=l[0],b=l[1],p=Object(a.useState)(""),h=Object(i.a)(p,2),g=h[0],E=h[1],O=Object(a.useState)(null),v=Object(i.a)(O,2),y=v[0],j=v[1];return r.a.createElement("div",{className:"form-wrapper"},r.a.createElement("h1",{className:"form-heading"},"Sign Up"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.firebase.doCreateUserWithEmailAndPassword(f,g).then(void e.firebase.db.collection("users").add({name:c,email:f,isAdmin:!1,highScore:0}).then((function(){s(""),b(""),E(""),e.history.push(m)})).catch((function(e){j(e)}))).catch((function(e){j(e)}))},className:"form login"},r.a.createElement("div",{className:"input-field"},r.a.createElement("i",{className:"fas fa-user"}),r.a.createElement("input",{type:"text",placeholder:"Name",value:c,onChange:function(e){return s(e.target.value)}})),r.a.createElement("div",{className:"input-field"},r.a.createElement("i",{className:"fas fa-envelope"}),r.a.createElement("input",{type:"email",placeholder:"Email",value:f,onChange:function(e){return b(e.target.value)}})),r.a.createElement("div",{className:"input-field"},r.a.createElement("i",{className:"fas fa-key"}),r.a.createElement("input",{type:"password",placeholder:"Password",value:g,onChange:function(e){return E(e.target.value)}})),r.a.createElement("button",{className:"form-btn",type:"submit"},"Sign Up"),y&&r.a.createElement("p",{className:"form-error"},y.message)),r.a.createElement("h4",null,"Already have and account? Log In:"),r.a.createElement(u.b,{to:d},"Log In"))})));var L=Object(l.g)(E((function(e){var t=Object(a.useState)(""),n=Object(i.a)(t,2),c=n[0],s=n[1],o=Object(a.useState)(""),l=Object(i.a)(o,2),d=l[0],b=l[1],p=Object(a.useState)(null),h=Object(i.a)(p,2),g=h[0],E=h[1];return r.a.createElement("div",{className:"form-wrapper"},r.a.createElement("h1",{className:"form-heading"},"Log In"),r.a.createElement("form",{onSubmit:function(t){e.firebase.doSignInWithEmailAndPassword(c,d).then((function(t){s(""),b(""),e.history.push(m)})).catch((function(e){E(e)})),t.preventDefault()},className:"form login"},r.a.createElement("div",{className:"input-field"},r.a.createElement("i",{className:"fas fa-envelope"}),r.a.createElement("input",{type:"email",placeholder:"Email",value:c,onChange:function(e){return s(e.target.value)}})),r.a.createElement("div",{className:"input-field"},r.a.createElement("i",{className:"fas fa-key"}),r.a.createElement("input",{type:"password",placeholder:"Password",value:d,onChange:function(e){return b(e.target.value)}})),r.a.createElement("button",{className:"form-btn",type:"submit"},"Log In"),g&&r.a.createElement("p",{className:"form-error"},g.message)),r.a.createElement("h4",null,"Don't have an account? Sign Up:"),r.a.createElement(u.b,{to:f},"Sign Up"))})));n(53);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var Q=P((function(e){return!!e}))((function(e){var t=Object(l.f)().category,n=e.ctgList.filter((function(e){return e.name.toLowerCase()===t.toLowerCase()}))[0].questions,c=Object(a.useState)(60),s=Object(i.a)(c,2),u=s[0],f=s[1],d=Object(a.useState)(0),b=Object(i.a)(d,2),p=b[0],h=b[1],g=Object(a.useState)(0),E=Object(i.a)(g,2),O=E[0],v=E[1];Object(a.useEffect)((function(){var e=setInterval((function(){f((function(e){return e-1}))}),1e3);return function(){return clearInterval(e)}}),[]),Object(a.useEffect)((function(){if(u<=-3)e.history.push(m);else if(u<=0){var t=e.firebase.auth.currentUser;t&&y(t)}}),[u]);var y=function(t){e.firebase.db.collection("users").get().then((function(e){var n=[];e.forEach((function(e){n.push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(n,!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({key:e.id},e.data()))})),(n=n.filter((function(e){return e.email===t.email})))[0].highScore<p&&j(n[0].key)})).catch((function(e){console.log("Error getting documents: ",e)}))},j=function(t){e.firebase.db.collection("users").doc(t).update({highScore:p})},N=function(e){e.target.name===n[O].correctAns&&h((function(e){return e+10})),w()},w=function(){O===n.length-1?v(0):v((function(e){return e+1}))},S=n[O].answers.map((function(e,t){return r.a.createElement("button",{onClick:N,key:t,name:t,className:"answer"},e)}));return u>0?r.a.createElement("div",{className:"game-container"},r.a.createElement("div",{className:"info-container"},r.a.createElement("h2",{className:"time"},"Remaining Time: ",u,"s"),r.a.createElement("h2",{className:"score"},"Score: ",p)),r.a.createElement("div",{className:"question"},n[O].ques),r.a.createElement("div",{className:"answer-container"},S)):r.a.createElement("div",{className:"game-container"},r.a.createElement("h2",{className:"score"},"Score: ",p),r.a.createElement("div",{className:"question"},"GAME OVER!"))}));n(28);var K=E((function(e){var t=Object(a.useState)(e.name),n=Object(i.a)(t,2),c=n[0],s=n[1],o=Object(a.useState)(!1),l=Object(i.a)(o,2),m=l[0],f=l[1],d=function(){c!==e.name&&e.firebase.db.collection("categories").doc(e.docId).update({name:c}),f(!1),e.toggleFetchData()},b=m?r.a.createElement("input",{type:"text",className:"name-input",value:c,onChange:function(e){return s(e.target.value)},onBlur:function(){return d()},onKeyDown:function(e){13===e.keyCode&&d()},autoFocus:!0}):r.a.createElement("h2",{className:"name"},c),p=e.userIsAdmin?"/".concat(e.name.toLowerCase()):"/".concat(e.name.toLowerCase(),"/game");return r.a.createElement("li",{className:"category-item"},r.a.createElement(u.b,{className:"category-link",to:p},b),e.userIsAdmin&&r.a.createElement("div",{className:"actions"},r.a.createElement("button",{className:"edit",onClick:function(){return f(!0)}},r.a.createElement("i",{className:"fas fa-pen"})),r.a.createElement("button",{className:"delete",onClick:function(){e.firebase.db.collection("categories").doc(e.docId).delete(),e.toggleFetchData()}},r.a.createElement("i",{className:"fas fa-trash-alt"}))))}));var W=P((function(e){return!!e}))((function(e){var t,n=Object(a.useState)(!1),c=Object(i.a)(n,2),s=c[0],o=c[1],u=Object(a.useState)(""),l=Object(i.a)(u,2),m=l[0],f=l[1],d=e.ctgList.map((function(t){return r.a.createElement(K,{key:t.key,docId:t.key,name:t.name,userIsAdmin:e.userIsAdmin,toggleFetchData:e.toggleFetchData})})),b=function(){o(!1),e.addCtg(m),f("")};return e.userIsAdmin&&s?t=r.a.createElement("li",{className:"category-item"},r.a.createElement("input",{type:"text",className:"name-input",value:m,onChange:function(e){return f(e.target.value)},onBlur:b,onKeyDown:function(e){13===e.keyCode&&b()},autoFocus:!0}),r.a.createElement("div",{className:"actions"},r.a.createElement("button",{className:"edit",onClick:b},r.a.createElement("i",{className:"fas fa-plus"})))):e.userIsAdmin&&!s&&(t=r.a.createElement("button",{onClick:function(){return o(!0)},className:"category-addnew"},"Add New")),r.a.createElement("div",{className:"category-wrapper"},r.a.createElement("h1",{className:"category-heading"},"Categories"),r.a.createElement("ul",{className:"category-list"},d),t)})),G=n(33);n(29);var z=E((function(e){var t=Object(a.useState)(e.ques),n=Object(i.a)(t,2),c=n[0],s=n[1],o=Object(a.useState)(e.answers),u=Object(i.a)(o,2),l=u[0],m=u[1],f=Object(a.useState)(e.corrAns),d=Object(i.a)(f,2),b=d[0],p=d[1],h=Object(a.useState)(!1),g=Object(i.a)(h,2),E=g[0],O=g[1];return E?r.a.createElement("div",{className:"question-wrapper"},r.a.createElement("div",{className:"question-actions"},r.a.createElement("button",{className:"question-edit",onClick:function(){return function(){O(!1);var t={key:e.idx,ques:c,answers:l,correctAns:b};e.updateQuestion(t)}()}},r.a.createElement("i",{className:"fas fa-plus"}))),r.a.createElement("input",{type:"text",className:"question-input",value:c,onChange:function(e){return s(e.target.value)}}),r.a.createElement("hr",null),r.a.createElement("textarea",{type:"textarea",className:"name-input",value:l,onChange:function(e){return function(e){var t=e.split(",",4);m(t)}(e.target.value)}}),r.a.createElement("hr",null),r.a.createElement("input",{type:"text",className:"question-input",value:"Correct Answer: "+b,onChange:function(e){return p(e.target.value[e.target.value.length-1])}})):r.a.createElement("div",{className:"question-wrapper"},e.userIsAdmin&&r.a.createElement("div",{className:"question-actions"},r.a.createElement("button",{className:"question-edit",onClick:function(){return O(!0)}},r.a.createElement("i",{className:"fas fa-pen"})),r.a.createElement("button",{className:"question-delete",onClick:function(){return e.deleteQuestion(e.idx)}},r.a.createElement("i",{className:"fas fa-trash-alt"})))," ",r.a.createElement("h2",{className:"question"},c),r.a.createElement("ul",{className:"answers-list"},l.map((function(e,t){return r.a.createElement("li",{key:t,className:"answers-item"},r.a.createElement("div",{className:"answers-link"},e))}))))}));var F=P((function(e){return!!e}))((function(e){var t=Object(l.f)().category,n=e.ctgList.filter((function(e){return e.name.toLowerCase()===t.toLowerCase()}))[0],c=n.key,s=Object(a.useState)(!1),o=Object(i.a)(s,2),m=o[0],f=o[1],d=Object(a.useState)("Question?"),b=Object(i.a)(d,2),p=b[0],h=b[1],g=Object(a.useState)(["ans1","ans2","ans3","ans4"]),E=Object(i.a)(g,2),O=E[0],v=E[1],y=Object(a.useState)("0"),j=Object(i.a)(y,2),N=j[0],w=j[1],S=Object(a.useState)(n.questions),k=Object(i.a)(S,2),C=k[0],A=k[1],q=function(t){e.updateQuestion(c,t)},I=function(t){A(C.filter((function(e){return e.key!=t}))),e.deleteQuestion(c,t)},P=C.map((function(t){return r.a.createElement(z,{key:t.key,idx:t.key,ques:t.ques,answers:t.answers,corrAns:t.correctAns,userIsAdmin:e.userIsAdmin,updateQuestion:q,deleteQuestion:I})})),D=e.userIsAdmin&&!m?r.a.createElement("button",{className:"questions-addnew",onClick:function(){return f(!0)}},"Add New Question"):r.a.createElement("div",{className:"question-wrapper"},r.a.createElement("div",{className:"question-actions"},r.a.createElement("button",{className:"question-edit",onClick:function(){var t=[{key:n.nextKey,answers:O,correctAns:N,ques:p}].concat(Object(G.a)(C));A(t),e.addQuestion(c,t),console.log(t),f(!1),w("0"),h("Question?"),v(["ans1","ans2","ans3","ans4"])}},r.a.createElement("i",{className:"fas fa-plus"}))),r.a.createElement("input",{type:"text",className:"question-input",value:p,onChange:function(e){return h(e.target.value)}}),r.a.createElement("hr",null),r.a.createElement("textarea",{type:"textarea",className:"name-input",value:O,onChange:function(e){return function(e){var t=e.split(",",4);v(t)}(e.target.value)}}),r.a.createElement("hr",null),r.a.createElement("input",{type:"text",className:"question-input",value:"Correct Answer: "+N,onChange:function(e){return w(e.target.value[e.target.value.length-1])}}));return r.a.createElement("div",{className:"questions-list"},r.a.createElement("h2",{className:"questions-heading"},"Questions Stored in ",t),r.a.createElement(u.b,{to:"/".concat(t.toLowerCase(),"/game"),className:"play-game"},"Click to Play Game for this Category"),D,P)}));n(54);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var M=P((function(e){return!!e}))((function(e){var t=Object(a.useState)([]),n=Object(i.a)(t,2),c=n[0],s=n[1];Object(a.useEffect)((function(){e.firebase.db.collection("users").get().then((function(e){var t=[];e.forEach((function(e){t.push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(n,!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({key:e.id},e.data()))})),s(t)})).catch((function(e){console.log("Error getting documents: ",e)}))}),[]),console.log(c);var u=c.map((function(e){return r.a.createElement("li",{className:"user-item"},r.a.createElement("h3",null,"Name: ",e.name),r.a.createElement("h3",null,"Email: ",e.email),r.a.createElement("h3",null,"High Score: ",e.highScore))}));return r.a.createElement("div",{className:"users-container"},r.a.createElement("h1",{class:"users-heading"},"Users"),c&&0!==c.length?r.a.createElement("ul",{className:"users-list"},u):"LOADING...")}));n(55);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var J=I((function(e){var t=Object(a.useState)(null),n=Object(i.a)(t,2),c=n[0],s=n[1],g=Object(a.useState)(!1),E=Object(i.a)(g,2),O=E[0],v=E[1],y=Object(a.useState)(!1),j=Object(i.a)(y,2),N=j[0],w=j[1],S=Object(a.useState)(!1),k=Object(i.a)(S,2),C=k[0],A=k[1];Object(a.useEffect)((function(){var t=e.firebase.auth.currentUser;t&&e.firebase.db.collection("users").get().then((function(e){e.forEach((function(e){e.data().email===t.email&&!0===e.data().isAdmin?(A(!0),console.log("ADMIN LOGGED IN!")):e.data().email===t.email&&!1===e.data().isAdmin&&(A(!1),console.log("USER LOGGED IN!"))}))}))}),[e.firebase.auth.currentUser]),Object(a.useEffect)((function(){null==c&&v(!0),e.firebase.db.collection("categories").get().then((function(e){var t=[];e.forEach((function(e){t.push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(n,!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({key:e.id},e.data()))})),t=t.sort((function(e,t){return e.name.localeCompare(t.name)})),console.log(t),s(t),v(!1)})).catch((function(e){console.log("Error getting documents: ",e)}))}),[N]);var q=function(){w((function(e){return!e}))},I=function(t){e.firebase.db.collection("categories").add({name:t,questions:[]}),q()},P=function(t,n){var a;c.filter((function(e){return e.key===t&&(e.questions=n,e.nextKey++,a=e),e})),a={name:a.name,nextKey:a.nextKey,questions:a.questions},console.log("addQuestion",a),e.firebase.db.collection("categories").doc(t).set(a).then((function(){console.log("Document successfully written!"),q()})).catch((function(e){console.error("Error writing document: ",e)}))},U=function(t,n){var a;c.filter((function(e){e.key===t&&(e.questions=e.questions.filter((function(e){return e.key!=n})),a=e)})),a={name:a.name,nextKey:a.nextKey,questions:a.questions},console.log("deleteQuestion",a),e.firebase.db.collection("categories").doc(t).set(a).then((function(){console.log("Document successfully written!"),q()})).catch((function(e){console.error("Error writing document: ",e)}))},K=function(t,n){var a;c.filter((function(e){e.key===t&&(e.questions=e.questions.map((function(e){return e.key===n.key?n:e})),a=e)})),a={name:a.name,nextKey:a.nextKey,questions:a.questions},console.log("updateQuestion",a),e.firebase.db.collection("categories").doc(t).set(a).then((function(){console.log("Document successfully written!"),q()})).catch((function(e){console.error("Error writing document: ",e)}))};return r.a.createElement(u.a,null,r.a.createElement(D,{userIsAdmin:C}),r.a.createElement("div",{className:"App"},O?r.a.createElement("h2",null,"LOADING DATA"):r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:m,render:function(e){return r.a.createElement(W,Object.assign({ctgList:c,userIsAdmin:C,addCtg:I,toggleFetchData:q},e))}}),r.a.createElement(l.a,{exact:!0,path:f,component:x}),r.a.createElement(l.a,{exact:!0,path:d,render:function(e){return r.a.createElement(L,Object.assign({setUserIsAdmin:A},e))}}),r.a.createElement(l.a,{exact:!0,path:h,component:M,render:function(e){return r.a.createElement(M,Object.assign({userIsAdmin:C},e))}}),r.a.createElement(l.a,{exact:!0,path:b,render:function(e){return r.a.createElement(F,Object.assign({ctgList:c,userIsAdmin:C,addQuestion:P,deleteQuestion:U,updateQuestion:K,toggleFetchData:q},e))}}),r.a.createElement(l.a,{exact:!0,path:p,render:function(e){return r.a.createElement(Q,Object.assign({ctgList:c},e))}}),r.a.createElement(l.a,{path:m,component:W}))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(O.Provider,{value:new w},r.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[34,1,2]]]);
//# sourceMappingURL=main.04479592.chunk.js.map